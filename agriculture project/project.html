<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AI Crop Yield — Prediction & Optimization</title>
  <style>
    :root{
      --bg1:#0f172a; --bg2:#071024; --accent:#00d4ff; --accent-2:#6bffb8;
      --card:#0b1220; --glass: rgba(255,255,255,0.04);
      --glass-2: rgba(255,255,255,0.03);
      --muted: #9aa7bd;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg1),var(--bg2));color:#e6f0ff}
    .app{max-width:1100px;margin:32px auto;padding:28px;border-radius:18px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));box-shadow:0 8px 30px rgba(2,6,23,0.6);backdrop-filter: blur(8px);}
    header{display:flex;gap:18px;align-items:center;margin-bottom:18px}
    .logo{width:72px;height:72px;border-radius:14px;display:grid;place-items:center;background:linear-gradient(135deg,var(--accent),var(--accent-2));box-shadow:0 6px 20px rgba(11,192,210,0.12);}
    .logo svg{width:44px;height:44px}
    h1{margin:0;font-size:20px;letter-spacing:0.2px}
    p.lead{margin:4px 0 0;color:var(--muted);font-size:13px}

    .grid{display:grid;grid-template-columns:1fr 430px;gap:22px}

    .card{background:linear-gradient(180deg,var(--card), rgba(255,255,255,0.01));padding:18px;border-radius:14px;border:1px solid var(--glass);}
    label{display:block;font-size:13px;color:var(--muted);margin-bottom:8px}
    .row{display:flex;gap:10px}
    input[type=text], input[type=number], select, textarea{width:100%;padding:10px;border-radius:10px;border:1px solid var(--glass-2);background:transparent;color:inherit;font-size:14px}
    .field{margin-bottom:12px}

    .split{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    button.primary{background:linear-gradient(90deg,var(--accent),var(--accent-2));border:none;padding:10px 14px;border-radius:10px;color:#012029;font-weight:700;cursor:pointer}
    button.ghost{background:transparent;border:1px solid var(--glass-2);padding:10px;border-radius:10px;color:var(--muted);cursor:pointer}

    .result-big{font-size:36px;font-weight:800;margin:10px 0}
    .small{font-size:13px;color:var(--muted)}

    .suggestion{background:linear-gradient(180deg, rgba(11,27,38,0.6), rgba(255,255,255,0.01));padding:12px;border-radius:10px;margin-top:10px;border:1px dashed rgba(255,255,255,0.03)}

    /* unique badge */
    .badge{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:999px;background:rgba(255,255,255,0.03);font-weight:600}

    footer{margin-top:16px;color:var(--muted);font-size:13px;text-align:center}

    /* responsive */
    @media (max-width:980px){.grid{grid-template-columns:1fr}.app{margin:14px}}

    /* decorative SVG background */
    .bg-blob{position:absolute;right:-60px;top:-40px;opacity:0.18;filter:blur(20px);transform:rotate(12deg)}
  </style>
</head>
<body>
  <div style="position:relative;max-width:1200px;margin:0 auto;padding:16px">
    <svg class="bg-blob" width="420" height="420" viewBox="0 0 600 600" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M421.5 78.1C467.4 112 484 163 476 210.5C468 258 435 302 396.5 338.5C358 375 313 404.5 262.5 416.5C212 428.5 155.5 423 113.5 392C71.5 361 48.5 304.5 59 249.5C69.5 194.5 114.5 141 165.5 112.5C216.5 84 272 81 330 76.5C388 72 375.6 44.2 421.5 78.1Z" fill="#00d4ff"/></svg>

    <div class="app">
      <header>
        <div class="logo" aria-hidden>
          <svg viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="6" y="6" width="52" height="52" rx="10" fill="white" opacity="0.08"/><path d="M16 44c8-8 18-14 28-14" stroke="#012029" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M36 20c6 6 10 12 12 22" stroke="#012029" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </div>
        <div>
          <h1>AI Crop Yield — Prediction & Optimization</h1>
          <p class="lead">Interactive demo frontend. Enter field & weather data, get an instant prediction and practical optimization tips.</p>
        </div>
        <div style="margin-left:auto"><span class="badge">Prototype • No-backend</span></div>
      </header>

      <div class="grid">
        <div>
          <div class="card">
            <h3 style="margin-top:0">Field & Environment Inputs</h3>
            <div class="field split">
              <div>
                <label>Crop Type</label>
                <select id="cropType">
                  <option value="wheat">Wheat</option>
                  <option value="rice">Rice</option>
                  <option value="maize">Maize</option>
                  <option value="soybean">Soybean</option>
                </select>
              </div>
              <div>
                <label>Field Area (ha)</label>
                <input id="area" type="number" value="1" min="0.01" step="0.01" />
              </div>
            </div>

            <div class="split">
              <div class="field">
                <label>Soil pH</label>
                <input id="soilPh" type="number" value="6.5" step="0.1" min="3" max="9" />
              </div>
              <div class="field">
                <label>Soil Moisture (%)</label>
                <input id="soilMoist" type="number" value="30" min="0" max="100" />
              </div>
            </div>

            <div class="split">
              <div class="field">
                <label>N (kg/ha)</label>
                <input id="nitrogen" type="number" value="80" />
              </div>
              <div class="field">
                <label>P (kg/ha)</label>
                <input id="phosphorus" type="number" value="40" />
              </div>
            </div>

            <div class="split">
              <div class="field">
                <label>K (kg/ha)</label>
                <input id="potassium" type="number" value="30" />
              </div>
              <div class="field">
                <label>Historical Avg Yield (t/ha)</label>
                <input id="histYield" type="number" value="3.2" step="0.1" />
              </div>
            </div>

            <hr style="border:none;border-top:1px solid rgba(255,255,255,0.03);margin:12px 0" />

            <div class="split">
              <div class="field">
                <label>Avg Temp (°C)</label>
                <input id="avgTemp" type="number" value="27" />
              </div>
              <div class="field">
                <label>Total Rain (mm)</label>
                <input id="rain" type="number" value="120" />
              </div>
            </div>

            <div class="field">
              <label>Farming Practices (comma separated)</label>
              <input id="practices" type="text" placeholder="e.g. drip-irrigation, early-sowing" />
            </div>

            <div style="display:flex;gap:10px;margin-top:12px">
              <button class="primary" id="predictBtn">Predict Yield</button>
              <button class="ghost" id="resetBtn">Reset</button>
              <button class="ghost" id="downloadBtn">Download JSON</button>
            </div>

            <p class="small" style="margin-top:10px">This front-end uses a simple local prediction engine (a compact linear model + rules) so you can prototype decisions quickly. For production connect it to a backend model (Python/Flask, Node, or cloud ML).</p>
          </div>

          <div class="card" style="margin-top:12px">
            <h3 style="margin-top:0">Advanced Options (Simulate)</h3>
            <div class="field">
              <label>Sowing Date</label>
              <input id="sowing" type="text" placeholder="e.g. 2025-06-10" />
            </div>
            <div class="field split">
              <div>
                <label>Use Reinforcement Optimizer?</label>
                <select id="useRL"><option value="no">No (rule-based)</option><option value="yes">Yes (simulated)</option></select>
              </div>
              <div>
                <label>Risk Appetite</label>
                <select id="risk"><option value="low">Low</option><option value="medium" selected>Medium</option><option value="high">High</option></select>
              </div>
            </div>
            <div class="field">
              <label>Notes (optional)</label>
              <textarea id="notes" rows="3" style="width:100%;border-radius:8px;background:transparent;border:1px solid var(--glass-2)"></textarea>
            </div>
          </div>
        </div>

        <div>
          <div class="card">
            <h3 style="margin-top:0">Prediction Result</h3>
            <div id="resultArea">
              <div class="small">Predicted Yield (t/ha)</div>
              <div class="result-big" id="predYield">—</div>
              <div class="small">Estimated Production</div>
              <div style="font-size:18px;font-weight:700;margin-top:6px" id="estProduction">—</div>

              <div style="margin-top:12px">
                <div class="small">Confidence</div>
                <div id="confBar" style="height:12px;background:rgba(255,255,255,0.03);border-radius:8px;margin-top:6px;overflow:hidden">
                  <div id="confFill" style="height:100%;width:0%;border-radius:8px;background:linear-gradient(90deg,var(--accent),var(--accent-2));transition:width 600ms"></div>
                </div>
                <div id="confText" class="small" style="margin-top:6px">—</div>
              </div>

              <div class="suggestion" id="optimization">
                <strong>Optimization Tips</strong>
                <div id="tips" style="margin-top:8px">—</div>
              </div>

              <div class="suggestion" id="explain" style="margin-top:12px">
                <strong>Model Explanation (local)</strong>
                <div id="explainText" style="margin-top:8px" class="small">This is a compact, interpretable model — weights are visible in code. Use server-side ML for real accuracy.</div>
              </div>
            </div>
          </div>

          <div class="card" style="margin-top:12px">
            <h3 style="margin-top:0">Quick Scenarios</h3>
            <div style="display:flex;gap:8px;flex-wrap:wrap">
              <button class="ghost" onclick="applyScenario('dry')">Dry Season</button>
              <button class="ghost" onclick="applyScenario('wet')">Wet Season</button>
              <button class="ghost" onclick="applyScenario('fertBoost')">Fertilizer Boost</button>
              <button class="ghost" onclick="applyScenario('organic')">Organic (low N)</button>
            </div>
            <p class="small" style="margin-top:10px">Use scenarios to see how recommendations and predictions change. Connect these to a server to compare real ML models.</p>
          </div>
        </div>
      </div>

      <footer>Made for prototyping • Want a backend / React version? Ask and I’ll generate it.</footer>
    </div>
  </div>

<script>
// -------------------- Local prediction engine (simple, explainable) --------------------
// This compact model uses normalized features and linear weights tuned for demo only.

function getInputs(){
  return {
    crop: document.getElementById('cropType').value,
    area: parseFloat(document.getElementById('area').value) || 1,
    ph: parseFloat(document.getElementById('soilPh').value) || 6.5,
    moisture: parseFloat(document.getElementById('soilMoist').value) || 30,
    N: parseFloat(document.getElementById('nitrogen').value) || 0,
    P: parseFloat(document.getElementById('phosphorus').value) || 0,
    K: parseFloat(document.getElementById('potassium').value) || 0,
    hist: parseFloat(document.getElementById('histYield').value) || 2.5,
    temp: parseFloat(document.getElementById('avgTemp').value) || 25,
    rain: parseFloat(document.getElementById('rain').value) || 100,
    practices: (document.getElementById('practices').value||'').toLowerCase(),
    useRL: document.getElementById('useRL').value === 'yes',
    risk: document.getElementById('risk').value
  }
}

function normalize(x,min,max){
  return (x - min)/(max-min);
}

function predictLocal(inputs){
  // base on historical yield and crop baseline
  const cropBaselines = {wheat:3.2, rice:4.0, maize:5.5, soybean:2.6};
  const base = cropBaselines[inputs.crop] || 3.0;

  // feature transforms
  const phScore = Math.max(0, 1 - Math.abs(7 - inputs.ph)/2); //